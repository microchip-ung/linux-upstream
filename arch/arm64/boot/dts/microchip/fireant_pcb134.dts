// SPDX-License-Identifier: (GPL-2.0+ OR MIT)
/*
 * Copyright (c) 2018 Microsemi Corporation
  */

/dts-v1/;
#include "fireant-soc.dtsi"

/ {
	model = "FireAnt PCB134 Reference Board";
	compatible = "mscc,fireant-pcb134", "mscc,fireant";
};

&uart0 {
        status = "okay";
};

&gpio {
	cs14_pins: cs14-pins {
		pins = "GPIO_44";
		function = "si";
	};
};

&spi0 {
	status = "okay";
	pinctrl-0 = <&si2_pins>;
	pinctrl-names = "default";
	interface-mapping-mask = <0x4000>;	// NAND CS14 = SPI2
	spi-flash@0 {
		compatible = "mx66l1g45g", "jedec,spi-nor";
		spi-max-frequency = <8000000>; /* input clock */
		reg = <0>; /* CS0 */
	};
	/* Dedicated SPI2 interface */
        spi-flash@14 {
		compatible = "spinand,mt29f";
		pinctrl-0 = <&cs14_pins>;
		pinctrl-names = "default";
		spi-max-frequency = <28000000>;
		reg = <14>; /* CS14 */
		partitions {
			compatible = "fixed-partitions";
			#address-cells = <1>;
			#size-cells = <1>;
			/* 256MiB */
			partition@0 {
				label = "rootfs_data";
				reg = <0x0000000 0x10000000>;
			};
		};
	};
};

&sgpio0 {
	status = "okay";
	mscc,sgpio-ports = <0x00FFFFFF>;
};

&i2c0 {
	status = "okay";
};

&gpio {
	i2cmux_pins_i: i2cmux-pins-i {
               pins = "GPIO_16", "GPIO_17", "GPIO_18", "GPIO_19",
                      "GPIO_20", "GPIO_22", "GPIO_36", "GPIO_35",
                      "GPIO_50", "GPIO_51", "GPIO_56", "GPIO_57";
		function = "twi_scl_m";
		output-low;
	};
	i2cmux_0: i2cmux-0 {
		pins = "GPIO_16";
		function = "twi_scl_m";
		output-high;
	};
	i2cmux_1: i2cmux-1 {
		pins = "GPIO_17";
		function = "twi_scl_m";
		output-high;
	};
	i2cmux_2: i2cmux-3 {
		pins = "GPIO_18";
		function = "twi_scl_m";
		output-high;
	};
	i2cmux_3: i2cmux-4 {
		pins = "GPIO_19";
		function = "twi_scl_m";
		output-high;
	};
	i2cmux_4: i2cmux-4 {
		pins = "GPIO_20";
		function = "twi_scl_m";
		output-high;
	};
	i2cmux_5: i2cmux-5 {
		pins = "GPIO_22";
		function = "twi_scl_m";
		output-high;
	};
	i2cmux_6: i2cmux-6 {
		pins = "GPIO_36";
		function = "twi_scl_m";
		output-high;
	};
	i2cmux_7: i2cmux-7 {
		pins = "GPIO_35";
		function = "twi_scl_m";
		output-high;
	};
	i2cmux_8: i2cmux-8 {
		pins = "GPIO_50";
		function = "twi_scl_m";
		output-high;
	};
	i2cmux_9: i2cmux-9 {
		pins = "GPIO_51";
		function = "twi_scl_m";
		output-high;
	};
	i2cmux_10: i2cmux-10 {
		pins = "GPIO_56";
		function = "twi_scl_m";
		output-high;
	};
	i2cmux_11: i2cmux-11 {
		pins = "GPIO_57";
		function = "twi_scl_m";
		output-high;
	};
};

&ahb {
	i2c0_imux: i2c0-imux@0 {
		compatible = "i2c-mux-pinctrl";
		status = "disabled";
		#address-cells = <1>;
		#size-cells = <0>;
		i2c-parent = <&i2c0>;
	};
	i2c0_emux: i2c0-emux@0 {
		compatible = "i2c-mux-gpio";
		status = "disabled";
		#address-cells = <1>;
		#size-cells = <0>;
		i2c-parent = <&i2c0>;
	};
};

&i2c0_imux {
	status = "okay";
	pinctrl-names =
		"i2c0", "i2c1", "i2c2", "i2c3",
		"i2c4", "i2c5", "i2c6", "i2c7",
		"i2c8", "i2c9", "i2c10", "i2c11", "idle";
	pinctrl-0 = <&i2cmux_0>;
	pinctrl-1 = <&i2cmux_1>;
	pinctrl-2 = <&i2cmux_2>;
	pinctrl-3 = <&i2cmux_3>;
	pinctrl-4 = <&i2cmux_4>;
	pinctrl-5 = <&i2cmux_5>;
	pinctrl-6 = <&i2cmux_6>;
	pinctrl-7 = <&i2cmux_7>;
	pinctrl-8 = <&i2cmux_8>;
	pinctrl-9 = <&i2cmux_9>;
	pinctrl-10 = <&i2cmux_10>;
	pinctrl-11 = <&i2cmux_11>;
	pinctrl-12 = <&i2cmux_pins_i>;
	i2c@sfp1 {
		reg = <0x001>;
		#address-cells = <1>;
		#size-cells = <0>;
	};
	i2c@sfp2 {
		reg = <0x002>;
		#address-cells = <1>;
		#size-cells = <0>;
	};
	i2c@sfp3 {
		reg = <0x004>;
		#address-cells = <1>;
		#size-cells = <0>;
	};
	i2c@sfp4 {
		reg = <0x008>;
		#address-cells = <1>;
		#size-cells = <0>;
	};
	i2c@sfp5 {
		reg = <0x010>;
		#address-cells = <1>;
		#size-cells = <0>;
	};
	i2c@sfp6 {
		reg = <0x020>;
		#address-cells = <1>;
		#size-cells = <0>;
	};
	i2c@sfp7 {
		reg = <0x040>;
		#address-cells = <1>;
		#size-cells = <0>;
	};
	i2c@sfp8 {
		reg = <0x080>;
		#address-cells = <1>;
		#size-cells = <0>;
	};
	i2c@sfp9 {
		reg = <0x100>;
		#address-cells = <1>;
		#size-cells = <0>;
	};
	i2c@sfp10 {
		reg = <0x200>;
		#address-cells = <1>;
		#size-cells = <0>;
	};
	i2c@sfp11 {
		reg = <0x400>;
		#address-cells = <1>;
		#size-cells = <0>;
	};
	i2c@sfp12 {
		reg = <0x800>;
		#address-cells = <1>;
		#size-cells = <0>;
	};
};

&i2c0_emux {
	status = "okay";
	mux-gpios = <&gpio 55 GPIO_ACTIVE_HIGH
		     &gpio 60 GPIO_ACTIVE_HIGH
		     &gpio 61 GPIO_ACTIVE_HIGH
		     &gpio 54 GPIO_ACTIVE_HIGH>;
	idle-state = <0x8>;
	i2c@sfp13 {
		reg = <0x0>;
		#address-cells = <1>;
		#size-cells = <0>;
	};
	i2c@sfp14 {
		reg = <0x1>;
		#address-cells = <1>;
		#size-cells = <0>;
	};
	i2c@sfp15 {
		reg = <0x2>;
		#address-cells = <1>;
		#size-cells = <0>;
	};
	i2c@sfp16 {
		reg = <0x3>;
		#address-cells = <1>;
		#size-cells = <0>;
	};
	i2c@sfp17 {
		reg = <0x4>;
		#address-cells = <1>;
		#size-cells = <0>;
	};
	i2c@sfp18 {
		reg = <0x5>;
		#address-cells = <1>;
		#size-cells = <0>;
	};
	i2c@sfp19 {
		reg = <0x6>;
		#address-cells = <1>;
		#size-cells = <0>;
	};
	i2c@sfp20 {
		reg = <0x7>;
		#address-cells = <1>;
		#size-cells = <0>;
	};
};
